<!doctype html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>わどのさいと</title>
  <link rel="icon" href="assets/miku.jpg" type="image/jpeg">
  <link rel="stylesheet" href="styles.css">
  </head>
  <body>
    <main class="page">
      <section class="hero">
        <div class="slide-card" id="slideCard">
          <div class="card-content">
            <h1 class="title">にゃんこ代行メニュー</h1>
            <p class="subtitle">各アイテム 50円 / 選び放題 300円</p>

            <div class="items-grid">
              <ul>
                <li>猫缶</li>
                <li>XP</li>
                <li>NP</li>
                <li>敵城</li>
                <li>自城</li>
                <li>銀チケ</li>
                <li>金チケ</li>
                <li>プラチケ</li>
                <li>レジェチケ</li>
              </ul>

              <ul>
                <li>全キャラ開放</li>
                <li>全キャラレベルマ</li>
                <li>全キャラ第三形態</li>
                <li>全ステ解放</li>
                <li>お宝（銅・銀・金）</li>
                <li>クリア回数</li>
                <li>バトルアイテム</li>
                <li>キャッツアイ</li>
                <li>マタタビ</li>
              </ul>

              <ul>
                <li>猫ビタン</li>
                <li>城素材</li>
                <li>リーダーシップ</li>
                <li>広告削除</li>
                <li>施設レベル</li>
                <li>指定キャラ</li>
                <li class="price">各50円</li>
                <li class="bundle">選び放題 300円</li>
              </ul>
            </div>

            <div class="cta">
              <a class="primary" href="https://x.com/w6d0da" target="_blank" rel="noopener">注文はこちら</a>
            </div>
          </div>

          <div class="card-media">
            <!-- GIF を assets/miku.gif に置いてください -->
            <img src="assets/miku.gif" alt="みく.gif" class="miku" onerror="this.style.opacity=0.5;">
          </div>
        </div>
      </section>
    </main>

    <footer class="site-footer">
      <div class="left">
        <div class="badge">X_ID: <strong>w6doda</strong></div>
        <div class="badge">Discord_ID: <strong>w6do</strong></div>
      </div>
      <div class="right">
        <a class="server" href="https://discord.gg/sG6NrK5z7s" target="_blank" rel="noopener">Discord サーバー参加</a>
      </div>
    </footer>

    <script src="script.js"></script>

<audio id="bgm" autoplay muted preload="auto"></audio>

<script>
  // 曲リスト（順番に再生）
  const tracks = [
    "music/【妖怪ウォッチ公式】エンディング第2弾 「ダン・ダン・ドゥビ・ズバー」【妖Tube】.mp4",
    "music/【妖怪ウォッチ公式】エンディング第3弾 「アイドルはウーニャニャの件」【妖Tube】.mp4",
    "music/【妖怪ウォッチ公式】エンディング第5弾 「宇宙ダンス」【妖tube】.mp4",
    "music/【妖怪ウォッチ公式】オープニング第1弾 「ゲラゲラポーのうた」【妖Tube】.mp4"
  ];

  const bgm = document.getElementById("bgm");
  let current = 0;
  const maxVolume = 0.1; // 通常音量
  const fadeDuration = 1500; // フェード時間（ミリ秒）

  bgm.volume = 0;

  function playTrack(index) {
    bgm.src = tracks[index];
    bgm.muted = false;
    bgm.volume = 0;

    bgm.play().then(() => {
      console.log(`🎵 再生開始: ${tracks[index]}`);
      fadeIn(bgm, maxVolume, fadeDuration);
    }).catch(err => {
      console.warn("⚠️ 自動再生がブロックされました:", err);
    });
  }

  function fadeOut(audio, duration, callback) {
    const steps = 20;
    const stepTime = duration / steps;
    const volStep = audio.volume / steps;
    let count = 0;

    const fade = setInterval(() => {
      audio.volume = Math.max(0, audio.volume - volStep);
      count++;
      if (count >= steps) {
        clearInterval(fade);
        if (callback) callback();
      }
    }, stepTime);
  }

  function fadeIn(audio, targetVolume, duration) {
    const steps = 20;
    const stepTime = duration / steps;
    const volStep = targetVolume / steps;
    let count = 0;

    const fade = setInterval(() => {
      audio.volume = Math.min(targetVolume, audio.volume + volStep);
      count++;
      if (count >= steps) clearInterval(fade);
    }, stepTime);
  }

  bgm.addEventListener("ended", () => {
    fadeOut(bgm, fadeDuration, () => {
      current = (current + 1) % tracks.length;
      playTrack(current);
    });
  });

  window.addEventListener("load", () => {
    setTimeout(() => {
      playTrack(current);
    }, 300);
  });
</script>

  </body>
</html>
